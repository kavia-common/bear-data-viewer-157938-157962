{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints for querying and summarizing bear movement detection data using Flask, marshmallow schemas, and SQLAlchemy ORM models. It includes route handlers for listing recent detections and providing summary statistics, with external dependency imports and dynamic database session creation.", "external_files": ["identify_bear_movement.py", "flask_smorest", "flask.views", "marshmallow", "datetime", "sqlalchemy", "os"], "external_methods": ["flask.request", "session.query", "session.close", "sessionmaker", "create_engine", "desc", "func.avg"], "published": ["blp", "BearMovementSchema", "BearMovementSummarySchema", "BearMovementList", "BearMovementSummary"], "classes": [{"name": "BearMovementSchema", "description": "Schema representing a Bear Movement Detection record returned by the API."}, {"name": "BearMovementSummarySchema", "description": "Schema for movement summary statistics."}, {"name": "BearMovementList", "description": "API view class providing recent bear movement detection records."}, {"name": "BearMovementSummary", "description": "API view class providing summary statistics for bear movement data."}], "methods": [{"name": "_get_db_session()", "description": "Creates and returns a database session for movement detection data using SQLAlchemy engine and sessionmaker.", "scope": "", "scopeKind": ""}, {"name": "get (in BearMovementList)", "description": "Handles GET requests to retrieve recent bear movement detection records with filtering and limits."}, {"name": "get (in BearMovementSummary)", "description": "Handles GET requests to retrieve aggregated movement detection statistics over a specified time window."}, {"name": "get(self)", "scope": "BearMovementSummary", "scopeKind": "class", "description": "unavailable"}], "calls": ["session.query", "session.close", "request.args.get", "datetime.now", "timedelta", "session.query().filter", "session.query().filter().count", "session.query().filter().scalar", "session.query().order_by", "session.query().first", "sessionmaker", "create_engine", "desc", "func.avg"], "search-terms": ["bear movement", "movement detection API", "Flask method view", "movement detection summary", "SQLAlchemy session", "carefully filtered detection data"], "state": 2, "file_id": 16, "knowledge_revision": 42, "git_revision": "", "ctags": [{"_type": "tag", "name": "BearMovementDetection", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    BearMovementDetection = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "BearMovementList", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^class BearMovementList(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BearMovementSchema", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^class BearMovementSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BearMovementSummary", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^class BearMovementSummary(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BearMovementSummarySchema", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^class BearMovementSummarySchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MOVEMENT_DETECTION_AVAILABLE", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    MOVEMENT_DETECTION_AVAILABLE = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "MOVEMENT_DETECTION_AVAILABLE", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    MOVEMENT_DETECTION_AVAILABLE = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_get_db_session", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^def _get_db_session():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "avg_confidence", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    avg_confidence = fields.Float(required=True, description=\"Average movement confidence\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSummarySchema", "scopeKind": "class"}, {"_type": "tag", "name": "bear_confidence", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    bear_confidence = fields.Float(allow_none=True, description=\"Bear detection confidence score/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "bear_id", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    bear_id = fields.String(required=True, description=\"Bear identifier\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "bear_x1", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    bear_x1 = fields.Float(allow_none=True, description=\"Bear bounding box x1 coordinate\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "bear_x2", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    bear_x2 = fields.Float(allow_none=True, description=\"Bear bounding box x2 coordinate\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "bear_y1", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    bear_y1 = fields.Float(allow_none=True, description=\"Bear bounding box y1 coordinate\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "bear_y2", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    bear_y2 = fields.Float(allow_none=True, description=\"Bear bounding box y2 coordinate\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^blp = Blueprint($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "distance_moved", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    distance_moved = fields.Float(allow_none=True, description=\"Distance moved since previous fr/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "frame_number", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    frame_number = fields.Integer(required=True, description=\"Video frame number\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "frame_timestamp", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    frame_timestamp = fields.DateTime($/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "BearMovementList", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "BearMovementSummary", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    get = blp.response($/", "language": "Python", "kind": "variable", "scope": "BearMovementList", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    get = blp.response($/", "language": "Python", "kind": "variable", "scope": "BearMovementSummary", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    id = fields.Integer(required=True, description=\"Unique detection ID\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "latest_timestamp", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    latest_timestamp = fields.DateTime($/", "language": "Python", "kind": "variable", "scope": "BearMovementSummarySchema", "scopeKind": "class"}, {"_type": "tag", "name": "movement_confidence", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    movement_confidence = fields.Float(required=True, description=\"Movement analysis confidence /", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "movement_state", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    movement_state = fields.String(required=True, description=\"Movement state: moving, resting, /", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "moving_count", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    moving_count = fields.Integer(required=True, description=\"Number of moving state detections\"/", "language": "Python", "kind": "variable", "scope": "BearMovementSummarySchema", "scopeKind": "class"}, {"_type": "tag", "name": "processing_timestamp", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    processing_timestamp = fields.DateTime($/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "resting_count", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    resting_count = fields.Integer(required=True, description=\"Number of resting state detection/", "language": "Python", "kind": "variable", "scope": "BearMovementSummarySchema", "scopeKind": "class"}, {"_type": "tag", "name": "static_objects", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    static_objects = fields.Raw(allow_none=True, description=\"JSON array of static object detect/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}, {"_type": "tag", "name": "total_detections", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    total_detections = fields.Integer(required=True, description=\"Total number of detections\")$/", "language": "Python", "kind": "variable", "scope": "BearMovementSummarySchema", "scopeKind": "class"}, {"_type": "tag", "name": "unknown_count", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    unknown_count = fields.Integer(required=True, description=\"Number of unknown state detection/", "language": "Python", "kind": "variable", "scope": "BearMovementSummarySchema", "scopeKind": "class"}, {"_type": "tag", "name": "video_timestamp_sec", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/app/routes/bear_movement.py", "pattern": "/^    video_timestamp_sec = fields.Float(required=True, description=\"Timestamp within the video in/", "language": "Python", "kind": "variable", "scope": "BearMovementSchema", "scopeKind": "class"}], "hash": "a23fa1a986bc9adcb537220ed0e8359d", "format-version": 4, "code-base-name": "backend", "filename": "backend/app/routes/bear_movement.py", "fields": [{"name": "BearMovementDetection = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MOVEMENT_DETECTION_AVAILABLE = False", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MOVEMENT_DETECTION_AVAILABLE = True", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "avg_confidence = fields.Float(required=True, description=\"Average movement confidence\")", "scope": "BearMovementSummarySchema", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_confidence = fields.Float(allow_none=True, description=\"Bear detection confidence score/", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_id = fields.String(required=True, description=\"Bear identifier\")", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_x1 = fields.Float(allow_none=True, description=\"Bear bounding box x1 coordinate\")", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_x2 = fields.Float(allow_none=True, description=\"Bear bounding box x2 coordinate\")", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_y1 = fields.Float(allow_none=True, description=\"Bear bounding box y1 coordinate\")", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_y2 = fields.Float(allow_none=True, description=\"Bear bounding box y2 coordinate\")", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "blp = Blueprint(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "distance_moved = fields.Float(allow_none=True, description=\"Distance moved since previous fr/", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "frame_number = fields.Integer(required=True, description=\"Video frame number\")", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "frame_timestamp = fields.DateTime(", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "get = blp.response(", "scope": "BearMovementList", "scopeKind": "class", "description": "unavailable"}, {"name": "id = fields.Integer(required=True, description=\"Unique detection ID\")", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "latest_timestamp = fields.DateTime(", "scope": "BearMovementSummarySchema", "scopeKind": "class", "description": "unavailable"}, {"name": "movement_confidence = fields.Float(required=True, description=\"Movement analysis confidence /", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "movement_state = fields.String(required=True, description=\"Movement state: moving, resting, /", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "moving_count = fields.Integer(required=True, description=\"Number of moving state detections\"/", "scope": "BearMovementSummarySchema", "scopeKind": "class", "description": "unavailable"}, {"name": "processing_timestamp = fields.DateTime(", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "resting_count = fields.Integer(required=True, description=\"Number of resting state detection/", "scope": "BearMovementSummarySchema", "scopeKind": "class", "description": "unavailable"}, {"name": "static_objects = fields.Raw(allow_none=True, description=\"JSON array of static object detect/", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "total_detections = fields.Integer(required=True, description=\"Total number of detections\")", "scope": "BearMovementSummarySchema", "scopeKind": "class", "description": "unavailable"}, {"name": "unknown_count = fields.Integer(required=True, description=\"Number of unknown state detection/", "scope": "BearMovementSummarySchema", "scopeKind": "class", "description": "unavailable"}, {"name": "video_timestamp_sec = fields.Float(required=True, description=\"Timestamp within the video in/", "scope": "BearMovementSchema", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"42": ""}]}