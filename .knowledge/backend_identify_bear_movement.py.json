{"is_source_file": true, "format": "Python", "description": "A modular Python script for detecting bear movement in videos downloaded from S3, using YOLOv8-lite for object detection, analyzing movement relative to static objects, and logging results into a database. Includes components for S3 interaction, detection, analysis, database storage, and main orchestration.", "external_files": ["boto3", "botocore.exceptions", "ultralytics", "cv2", "numpy", "sqlalchemy"], "external_methods": ["boto3.client", "download_file", "boto3.exceptions", "YOLO", "cv2.VideoCapture", "cv2.CAP_PROP_FPS", "cv2.read", "sqlalchemy.create_engine", "sqlalchemy.sessionmaker", "Base.metadata.create_all"], "published": ["identify_bear_movement.py"], "classes": [{"name": "Config", "description": "Centralized configuration management reading environment variables for parameters like S3 bucket info, detection thresholds, database URL, and logging level."}, {"name": "MovementState", "description": "Enum representing possible bear movement statuses: moving, resting, or unknown."}, {"name": "BoundingBox", "description": "Data class representing detection bounding boxes with methods to compute center, area, and distance to other boxes."}, {"name": "FrameDetection", "description": "Data class encapsulating all detections in a single frame, including timestamps, bear and static object lists, and frame info."}, {"name": "BearMovementDetection", "description": "SQLAlchemy ORM model for storing detection and movement analysis data in the database."}, {"name": "DatabaseManager", "description": "Manages database connection, schema creation, and insertion of detection data."}, {"name": "S3Downloader", "description": "Handles downloading video files from an S3 bucket, with error handling and verification."}, {"name": "BearDetector", "description": "Loads and runs YOLOv8-lite for object detection on video frames."}, {"name": "MovementAnalyzer", "description": "Analyzes bear movement relative to previous positions and static objects, classifying as moving, resting, or unknown."}, {"name": "VideoProcessor", "description": "Processes video files frame-by-frame, applies detection and movement analysis, and logs results."}, {"name": "BearMovementDetector", "description": "Main orchestrator class controlling video download, frame processing, and continuous operation loop."}], "methods": [{"name": "logging.Logger setup_logging()", "description": "Configure logging with specified level and format.", "scope": "", "scopeKind": ""}, {"name": "bool save_detection(self, detection: FrameDetection, movement_state: MovementState, movement_confidence: float, distance_moved: Optional[float] = None)", "description": "Insert detection results with movement state into database; fallback logs if DB unavailable.", "scope": "DatabaseManager", "scopeKind": "class"}, {"name": "bool download_video(self, dest_path: str)", "description": "Download video from S3 bucket to local path with verification.", "scope": "S3Downloader", "scopeKind": "class"}, {"name": "List[BoundingBox] detect_objects(self, frame)", "description": "Run object detection on a video frame returning detected bounding boxes.", "scope": "BearDetector", "scopeKind": "class"}, {"name": "Tuple[MovementState,float,Optional[float]] analyze_movement(self, detection: FrameDetection)", "description": "Determine if bear(s) are moving or resting based on previous positions.", "scope": "MovementAnalyzer", "scopeKind": "class"}, {"name": "None process_video(self, video_path: str, detector: BearDetector, analyzer: MovementAnalyzer, db_manager: DatabaseManager)", "description": "Iterate over video frames, detect objects, analyze movement, and store results.", "scope": "VideoProcessor", "scopeKind": "class"}, {"name": "None run(self)", "description": "Main loop that manages video download and processing, repeats indefinitely.", "scope": "BearMovementDetector", "scopeKind": "class"}, {"name": "None main()", "description": "CLI entry point to start the system, checking dependencies and launching.", "scope": "", "scopeKind": ""}, {"name": "__init__(self)", "scope": "VideoProcessor", "scopeKind": "class", "description": "unavailable"}, {"name": "Tuple[MovementState,float,Optional[float]] _calculate_movement(self, current_bears: List[BoundingBox])", "scope": "MovementAnalyzer", "scopeKind": "class", "description": "unavailable"}, {"name": "_create_s3_client(self)", "scope": "S3Downloader", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _download_video(self, video_path: str)", "scope": "BearMovementDetector", "scopeKind": "class", "description": "unavailable"}, {"name": "None _initialize_database(self)", "scope": "DatabaseManager", "scopeKind": "class", "description": "unavailable"}, {"name": "_load_model(self)", "scope": "BearDetector", "scopeKind": "class", "description": "unavailable"}, {"name": "None _log_detection_fallback(self, detection: FrameDetection, movement_state: MovementState, movement_confidence: float, distance_moved: Optional[float])", "scope": "DatabaseManager", "scopeKind": "class", "description": "unavailable"}, {"name": "None _process_frame(self, frame, frame_number: int, video_timestamp: float, detector: BearDetector, analyzer: MovementAnalyzer, db_manager: DatabaseManager)", "scope": "VideoProcessor", "scopeKind": "class", "description": "unavailable"}, {"name": "float area(self)", "scope": "BoundingBox", "scopeKind": "class", "description": "unavailable"}, {"name": "Tuple[float,float] center(self)", "scope": "BoundingBox", "scopeKind": "class", "description": "unavailable"}, {"name": "float distance_to(self, other: 'BoundingBox')", "scope": "BoundingBox", "scopeKind": "class", "description": "unavailable"}], "calls": ["boto3.client", "boto3.download_file", "ultralytics.YOLO", "cv2.VideoCapture", "cv2.read", "cv2.CAP_PROP_FPS", "session.add", "session.commit", "session.close", "Base.metadata.create_all"], "search-terms": ["identify_bear_movement.py", "YOLOv8-lite", "bear_movement_detections", "detect_objects", "movement_analysis", "S3 video download", "static object filtering", "database storage", "python detection script"], "state": 2, "file_id": 12, "knowledge_revision": 38, "git_revision": "", "revision_history": [{"32": ""}, {"37": ""}, {"38": ""}], "ctags": [{"_type": "tag", "name": "AWS_REGION", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    AWS_REGION = os.environ.get(\"AWS_DEFAULT_REGION\", \"us-east-1\")$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "BEAR_LABELS", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    BEAR_LABELS = set(os.environ.get(\"BEAR_LABELS\", \"bear\").split(\",\"))$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^Base = declarative_base() if declarative_base else None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "BearDetector", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class BearDetector:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BearMovementDetection", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    class BearMovementDetection(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BearMovementDetector", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class BearMovementDetector:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BotoCoreError", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    BotoCoreError = ClientError = Exception$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "BoundingBox", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class BoundingBox:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Column", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    Column = Integer = String = Float = DateTime = JSON = Boolean = Text = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class Config:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    DATABASE_URL = os.environ.get(\"DATABASE_URL\") or os.environ.get(\"MYSQL_URL\") or \"sqlite:\\/\\//", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "DB_MAX_OVERFLOW", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    DB_MAX_OVERFLOW = int(os.environ.get(\"DB_MAX_OVERFLOW\", \"10\"))$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "DB_POOL_SIZE", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    DB_POOL_SIZE = int(os.environ.get(\"DB_POOL_SIZE\", \"5\"))$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "DETECTION_THRESHOLD", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    DETECTION_THRESHOLD = float(os.environ.get(\"DETECTION_THRESHOLD\", \"0.3\"))$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "DOWNLOAD_INTERVAL_SEC", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    DOWNLOAD_INTERVAL_SEC = float(os.environ.get(\"DOWNLOAD_INTERVAL_SEC\", \"300\"))  # 5 minutes$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "DatabaseManager", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class DatabaseManager:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FRAME_PROCESSING_DELAY", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    FRAME_PROCESSING_DELAY = float(os.environ.get(\"FRAME_PROCESSING_DELAY\", \"0.1\"))$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "FrameDetection", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class FrameDetection:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Index", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    Index = UniqueConstraint = SQLAlchemyError = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "LOG_LEVEL", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    LOG_LEVEL = os.environ.get(\"LOG_LEVEL\", \"INFO\").upper()$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "MOVEMENT_THRESHOLD_PIXELS", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    MOVEMENT_THRESHOLD_PIXELS = float(os.environ.get(\"MOVEMENT_THRESHOLD_PIXELS\", \"30.0\"))$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "MOVING", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    MOVING = \"moving\"$/", "language": "Python", "kind": "variable", "scope": "MovementState", "scopeKind": "class"}, {"_type": "tag", "name": "MovementAnalyzer", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class MovementAnalyzer:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MovementState", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class MovementState(Enum):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RESTING", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    RESTING = \"resting\"$/", "language": "Python", "kind": "variable", "scope": "MovementState", "scopeKind": "class"}, {"_type": "tag", "name": "S3Downloader", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class S3Downloader:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "S3_BUCKET", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    S3_BUCKET = os.environ.get(\"BEAR_S3_BUCKET\", \"identify_bear_bucket\")$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "S3_KEY", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    S3_KEY = os.environ.get(\"BEAR_S3_KEY\", \"bears.mp4\")$/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "STATIC_OBJECT_LABELS", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    STATIC_OBJECT_LABELS = set(os.environ.get(\"STATIC_OBJECT_LABELS\", \"tree,hammock,cage\").split/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "UNKNOWN", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    UNKNOWN = \"unknown\"$/", "language": "Python", "kind": "variable", "scope": "MovementState", "scopeKind": "class"}, {"_type": "tag", "name": "VideoProcessor", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^class VideoProcessor:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "YOLO", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    YOLO = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "YOLO_MODEL_PATH", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    YOLO_MODEL_PATH = os.environ.get(\"YOLO_MODEL_PATH\", \"yolov8n.pt\")  # Using nano for lite ver/", "language": "Python", "kind": "variable", "scope": "Config", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "BearDetector", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "BearMovementDetector", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DatabaseManager", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "MovementAnalyzer", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "S3Downloader", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "VideoProcessor", "scopeKind": "class"}, {"_type": "tag", "name": "__table_args__", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        __table_args__ = ($/", "file": true, "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        __tablename__ = \"bear_movement_detections\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "_calculate_movement", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def _calculate_movement(self, current_bears: List[BoundingBox]) -> Tuple[MovementState, floa/", "language": "Python", "typeref": "typename:Tuple[MovementState,float,Optional[float]]", "kind": "member", "signature": "(self, current_bears: List[BoundingBox])", "scope": "MovementAnalyzer", "scopeKind": "class"}, {"_type": "tag", "name": "_create_s3_client", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def _create_s3_client(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "S3Downloader", "scopeKind": "class"}, {"_type": "tag", "name": "_download_video", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def _download_video(self, video_path: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, video_path: str)", "scope": "BearMovementDetector", "scopeKind": "class"}, {"_type": "tag", "name": "_initialize_database", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def _initialize_database(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "DatabaseManager", "scopeKind": "class"}, {"_type": "tag", "name": "_load_model", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def _load_model(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "BearDetector", "scopeKind": "class"}, {"_type": "tag", "name": "_log_detection_fallback", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def _log_detection_fallback(self, detection: FrameDetection, movement_state: MovementState, $/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, detection: FrameDetection, movement_state: MovementState, movement_confidence: float, distance_moved: Optional[float])", "scope": "DatabaseManager", "scopeKind": "class"}, {"_type": "tag", "name": "_process_frame", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def _process_frame(self, frame, frame_number: int, video_timestamp: float,$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, frame, frame_number: int, video_timestamp: float, detector: BearDetector, analyzer: MovementAnalyzer, db_manager: DatabaseManager)", "scope": "VideoProcessor", "scopeKind": "class"}, {"_type": "tag", "name": "analyze_movement", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def analyze_movement(self, detection: FrameDetection) -> Tuple[MovementState, float, Optiona/", "language": "Python", "typeref": "typename:Tuple[MovementState,float,Optional[float]]", "kind": "member", "signature": "(self, detection: FrameDetection)", "scope": "MovementAnalyzer", "scopeKind": "class"}, {"_type": "tag", "name": "area", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def area(self) -> float:$/", "language": "Python", "typeref": "typename:float", "kind": "member", "signature": "(self)", "scope": "BoundingBox", "scopeKind": "class"}, {"_type": "tag", "name": "bear_confidence", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        bear_confidence = Column(Float, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "bear_id", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        bear_id = Column(String(64), nullable=False, default=\"011\", index=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "bear_x1", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        bear_x1 = Column(Float, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "bear_x2", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        bear_x2 = Column(Float, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "bear_y1", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        bear_y1 = Column(Float, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "bear_y2", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        bear_y2 = Column(Float, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "boto3", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    boto3 = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "center", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def center(self) -> Tuple[float, float]:$/", "language": "Python", "typeref": "typename:Tuple[float,float]", "kind": "member", "signature": "(self)", "scope": "BoundingBox", "scopeKind": "class"}, {"_type": "tag", "name": "create_engine", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    create_engine = sessionmaker = declarative_base = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "cv2", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    cv2 = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "detect_objects", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def detect_objects(self, frame) -> List[BoundingBox]:$/", "language": "Python", "typeref": "typename:List[BoundingBox]", "kind": "member", "signature": "(self, frame)", "scope": "BearDetector", "scopeKind": "class"}, {"_type": "tag", "name": "distance_moved", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        distance_moved = Column(Float, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "distance_to", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def distance_to(self, other: 'BoundingBox') -> float:$/", "language": "Python", "typeref": "typename:float", "kind": "member", "signature": "(self, other: 'BoundingBox')", "scope": "BoundingBox", "scopeKind": "class"}, {"_type": "tag", "name": "download_video", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def download_video(self, dest_path: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, dest_path: str)", "scope": "S3Downloader", "scopeKind": "class"}, {"_type": "tag", "name": "extra_metadata", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        extra_metadata = Column(JSON, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "frame_number", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        frame_number = Column(Integer, nullable=False, index=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "frame_timestamp", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        frame_timestamp = Column(DateTime(timezone=True), nullable=False, index=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        id = Column(Integer, primary_key=True, autoincrement=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^logger = setup_logging()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^def main() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "movement_confidence", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        movement_confidence = Column(Float, nullable=False, default=0.0)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "movement_state", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        movement_state = Column(String(20), nullable=False, index=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "np", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    import numpy as np$/", "language": "Python", "kind": "namespace", "nameref": "module:numpy"}, {"_type": "tag", "name": "np", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    np = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "process_video", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def process_video(self, video_path: str, detector: BearDetector, $/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, video_path: str, detector: BearDetector, analyzer: MovementAnalyzer, db_manager: DatabaseManager)", "scope": "VideoProcessor", "scopeKind": "class"}, {"_type": "tag", "name": "processing_timestamp", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        processing_timestamp = Column(DateTime(timezone=True), nullable=False, default=lambda: d/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "run", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def run(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "BearMovementDetector", "scopeKind": "class"}, {"_type": "tag", "name": "save_detection", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^    def save_detection(self, detection: FrameDetection, movement_state: MovementState, $/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, detection: FrameDetection, movement_state: MovementState, movement_confidence: float, distance_moved: Optional[float] = None)", "scope": "DatabaseManager", "scopeKind": "class"}, {"_type": "tag", "name": "setup_logging", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^def setup_logging() -> logging.Logger:$/", "language": "Python", "typeref": "typename:logging.Logger", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "static_objects", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        static_objects = Column(JSON, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}, {"_type": "tag", "name": "video_timestamp_sec", "path": "/home/kavia/workspace/code-generation/bear-data-viewer-157938-157962/backend/identify_bear_movement.py", "pattern": "/^        video_timestamp_sec = Column(Float, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "BearMovementDetection", "scopeKind": "class"}], "hash": "b2fa56e7e9de7449b11caf2081b2e610", "format-version": 4, "code-base-name": "backend", "filename": "backend/identify_bear_movement.py", "fields": [{"name": "AWS_REGION = os.environ.get(\"AWS_DEFAULT_REGION\", \"us-east-1\")", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "BEAR_LABELS = set(os.environ.get(\"BEAR_LABELS\", \"bear\").split(\",\"))", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "Base = declarative_base() if declarative_base else None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "BotoCoreError = ClientError = Exception", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Column = Integer = String = Float = DateTime = JSON = Boolean = Text = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = os.environ.get(\"DATABASE_URL\") or os.environ.get(\"MYSQL_URL\") or \"sqlite:\\/\\//", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "DB_MAX_OVERFLOW = int(os.environ.get(\"DB_MAX_OVERFLOW\", \"10\"))", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "DB_POOL_SIZE = int(os.environ.get(\"DB_POOL_SIZE\", \"5\"))", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "DETECTION_THRESHOLD = float(os.environ.get(\"DETECTION_THRESHOLD\", \"0.3\"))", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "DOWNLOAD_INTERVAL_SEC = float(os.environ.get(\"DOWNLOAD_INTERVAL_SEC\", \"300\"))  # 5 minutes", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "FRAME_PROCESSING_DELAY = float(os.environ.get(\"FRAME_PROCESSING_DELAY\", \"0.1\"))", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "Index = UniqueConstraint = SQLAlchemyError = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "LOG_LEVEL = os.environ.get(\"LOG_LEVEL\", \"INFO\").upper()", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "MOVEMENT_THRESHOLD_PIXELS = float(os.environ.get(\"MOVEMENT_THRESHOLD_PIXELS\", \"30.0\"))", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "MOVING = \"moving\"", "scope": "MovementState", "scopeKind": "class", "description": "unavailable"}, {"name": "RESTING = \"resting\"", "scope": "MovementState", "scopeKind": "class", "description": "unavailable"}, {"name": "S3_BUCKET = os.environ.get(\"BEAR_S3_BUCKET\", \"identify_bear_bucket\")", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "S3_KEY = os.environ.get(\"BEAR_S3_KEY\", \"bears.mp4\")", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "STATIC_OBJECT_LABELS = set(os.environ.get(\"STATIC_OBJECT_LABELS\", \"tree,hammock,cage\").split/", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "UNKNOWN = \"unknown\"", "scope": "MovementState", "scopeKind": "class", "description": "unavailable"}, {"name": "YOLO = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "YOLO_MODEL_PATH = os.environ.get(\"YOLO_MODEL_PATH\", \"yolov8n.pt\")  # Using nano for lite ver/", "scope": "Config", "scopeKind": "class", "description": "unavailable"}, {"name": "__table_args__ = (", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"bear_movement_detections\"", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_confidence = Column(Float, nullable=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_id = Column(String(64), nullable=False, default=\"011\", index=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_x1 = Column(Float, nullable=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_x2 = Column(Float, nullable=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_y1 = Column(Float, nullable=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "bear_y2 = Column(Float, nullable=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "boto3 = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_engine = sessionmaker = declarative_base = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "cv2 = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "distance_moved = Column(Float, nullable=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "extra_metadata = Column(JSON, nullable=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "frame_number = Column(Integer, nullable=False, index=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "frame_timestamp = Column(DateTime(timezone=True), nullable=False, index=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, autoincrement=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "logger = setup_logging()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "movement_confidence = Column(Float, nullable=False, default=0.0)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "movement_state = Column(String(20), nullable=False, index=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "np = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "processing_timestamp = Column(DateTime(timezone=True), nullable=False, default=lambda: d/", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "static_objects = Column(JSON, nullable=True)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}, {"name": "video_timestamp_sec = Column(Float, nullable=False)", "scope": "BearMovementDetection", "scopeKind": "class", "description": "unavailable"}]}